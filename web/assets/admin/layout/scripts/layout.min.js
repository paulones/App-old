var Layout=function(){var e=Metronic.getAssetsPath()+"admin/layout/img/";var t=Metronic.getAssetsPath()+"admin/layout/css/";var n=function(){var e=$(".page-content");var t=$(".page-sidebar");var n=$("body");var r;if(n.hasClass("page-footer-fixed")===true&&n.hasClass("page-sidebar-fixed")===false){var s=Metronic.getViewPort().height-$(".page-footer").outerHeight()-$(".page-header").outerHeight();if(e.height()<s){e.attr("style","min-height:"+s+"px")}}else{if(n.hasClass("page-sidebar-fixed")){r=i();if(n.hasClass("page-footer-fixed")===false){r=r-$(".page-footer").outerHeight()}}else{var o=$(".page-header").outerHeight();var u=$(".page-footer").outerHeight();if(Metronic.getViewPort().width<992){r=Metronic.getViewPort().height-o-u}else{r=t.height()+20}if($(window).width()>1024&&r+o+u<Metronic.getViewPort().height){r=Metronic.getViewPort().height-o-u}}e.attr("style","min-height:"+r+"px")}};var r=function(){jQuery(".page-sidebar").on("click","li > a",function(e){if($(this).next().hasClass("sub-menu")===false){if(Metronic.getViewPort().width<992){$(".page-header .responsive-toggler").click()}return}if($(this).next().hasClass("sub-menu always-open")){return}var t=$(this).parent().parent();var r=$(this);var i=$(".page-sidebar-menu");var s=jQuery(this).next();var o=i.data("auto-scroll");var u=parseInt(i.data("slide-speed"));t.children("li.open").children("a").children(".arrow").removeClass("open");t.children("li.open").children(".sub-menu:not(.always-open)").slideUp(u);t.children("li.open").removeClass("open");var a=-200;if(s.is(":visible")){jQuery(".arrow",jQuery(this)).removeClass("open");jQuery(this).parent().removeClass("open");s.slideUp(u,function(){if(o==true&&$("body").hasClass("page-sidebar-closed")==false){if($("body").hasClass("page-sidebar-fixed")){i.slimScroll({scrollTo:r.position().top})}else{Metronic.scrollTo(r,a)}}n()})}else{jQuery(".arrow",jQuery(this)).addClass("open");jQuery(this).parent().addClass("open");s.slideDown(u,function(){if(o==true&&$("body").hasClass("page-sidebar-closed")==false){if($("body").hasClass("page-sidebar-fixed")){i.slimScroll({scrollTo:r.position().top})}else{Metronic.scrollTo(r,a)}}n()})}e.preventDefault()});jQuery(".page-sidebar").on("click"," li > a.ajaxify",function(e){e.preventDefault();Metronic.scrollTop();var t=$(this).attr("href");var n=jQuery(".page-sidebar ul");var r=$(".page-content");var i=$(".page-content .page-content-body");n.children("li.active").removeClass("active");n.children("arrow.open").removeClass("open");$(this).parents("li").each(function(){$(this).addClass("active");$(this).children("a > span.arrow").addClass("open")});$(this).parents("li").addClass("active");if(Metronic.getViewPort().width<992&&$(".page-sidebar").hasClass("in")){$(".page-header .responsive-toggler").click()}Metronic.startPageLoading();var s=$(this);$.ajax({type:"GET",cache:false,url:t,dataType:"html",success:function(e){if(s.parents("li.open").size()===0){$(".page-sidebar-menu > li.open > a").click()}Metronic.stopPageLoading();i.html(e);Layout.fixContentHeight();Metronic.initAjax()},error:function(e,t,n){Metronic.stopPageLoading();i.html("<h4>Could not load the requested content.</h4>")}})});jQuery(".page-content").on("click",".ajaxify",function(e){e.preventDefault();Metronic.scrollTop();var t=$(this).attr("href");var n=$(".page-content");var r=$(".page-content .page-content-body");Metronic.startPageLoading();if(Metronic.getViewPort().width<992&&$(".page-sidebar").hasClass("in")){$(".page-header .responsive-toggler").click()}$.ajax({type:"GET",cache:false,url:t,dataType:"html",success:function(e){Metronic.stopPageLoading();r.html(e);Layout.fixContentHeight();Metronic.initAjax()},error:function(e,t,n){r.html("<h4>Could not load the requested content.</h4>");Metronic.stopPageLoading()}})})};var i=function(){var e=Metronic.getViewPort().height-$(".page-header").outerHeight();if($("body").hasClass("page-footer-fixed")){e=e-$(".page-footer").outerHeight()}return e};var s=function(){var e=$(".page-sidebar-menu");Metronic.destroySlimScroll(e);if($(".page-sidebar-fixed").size()===0){n();return}if(Metronic.getViewPort().width>=992){e.attr("data-height",i());Metronic.initSlimScroll(e);n()}};var o=function(){var e=$("body");if(e.hasClass("page-sidebar-fixed")){$(".page-sidebar-menu").on("mouseenter",function(){if(e.hasClass("page-sidebar-closed")){$(this).removeClass("page-sidebar-menu-closed")}}).on("mouseleave",function(){if(e.hasClass("page-sidebar-closed")){$(this).addClass("page-sidebar-menu-closed")}})}};var u=function(){var e=$("body");if($.cookie&&$.cookie("sidebar_closed")==="1"&&Metronic.getViewPort().width>=992){$("body").addClass("page-sidebar-closed");$(".page-sidebar-menu").addClass("page-sidebar-menu-closed")}$(".page-sidebar, .page-header").on("click",".sidebar-toggler",function(t){var n=$(".page-sidebar");var r=$(".page-sidebar-menu");$(".sidebar-search",n).removeClass("open");if(e.hasClass("page-sidebar-closed")){e.removeClass("page-sidebar-closed");r.removeClass("page-sidebar-menu-closed");if($.cookie){$.cookie("sidebar_closed","0",{path:'/'})}}else{e.addClass("page-sidebar-closed");r.addClass("page-sidebar-menu-closed");if(e.hasClass("page-sidebar-fixed")){r.trigger("mouseleave")}if($.cookie){$.cookie("sidebar_closed","1",{path:'/'})}}$(window).trigger("resize")});o();$(".page-sidebar").on("click",".sidebar-search .remove",function(e){e.preventDefault();$(".sidebar-search").removeClass("open")});$(".page-sidebar .sidebar-search").on("keypress","input.form-control",function(e){if(e.which==13){$(".sidebar-search").submit();return false}});$(".sidebar-search .submit").on("click",function(e){e.preventDefault();if($("body").hasClass("page-sidebar-closed")){if($(".sidebar-search").hasClass("open")==false){if($(".page-sidebar-fixed").size()===1){$(".page-sidebar .sidebar-toggler").click()}$(".sidebar-search").addClass("open")}else{$(".sidebar-search").submit()}}else{$(".sidebar-search").submit()}});if($(".sidebar-search").size()!=0){$(".sidebar-search .input-group").on("click",function(e){e.stopPropagation()});$("body").on("click",function(){if($(".sidebar-search").hasClass("open")){$(".sidebar-search").removeClass("open")}})}};var a=function(){$(".page-header").on("click",'.hor-menu a[data-toggle="tab"]',function(e){e.preventDefault();var t=$(".hor-menu .nav");var n=t.find("li.current");$("li.active",n).removeClass("active");$(".selected",n).remove();var r=$(this).parents("li").last();r.addClass("current");r.find("a:first").append('<span class="selected"></span>')});$(".page-header").on("click",".search-form",function(e){$(this).addClass("open");$(this).find(".form-control").focus();$(".page-header .search-form .form-control").on("blur",function(e){$(this).closest(".search-form").removeClass("open");$(this).unbind("blur")})});$(".page-header").on("keypress",".hor-menu .search-form .form-control",function(e){if(e.which==13){$(this).closest(".search-form").submit();return false}});$(".page-header").on("mousedown",".search-form.open .submit",function(e){e.preventDefault();e.stopPropagation();$(this).closest(".search-form").submit()});$(document).on("click",".mega-menu-dropdown .dropdown-menu",function(e){e.stopPropagation()})};var f=function(){$("body").on("shown.bs.tab",'a[data-toggle="tab"]',function(){n()})};var l=function(){jQuery(".page-footer").on("click",".go-top",function(e){Metronic.scrollTo();e.preventDefault()})};var c=function(){var e=$(".full-height-content");var t;t=Metronic.getViewPort().height-$(".page-header").outerHeight(true)-$(".page-footer").outerHeight(true)-$(".page-title").outerHeight(true)-$(".page-breadcrumb").outerHeight(true);if(e.hasClass("portlet")){var n=e.find(".portlet-body");if(Metronic.getViewPort().width<992){Metronic.destroySlimScroll(n.find(".full-height-content-body"));return}t=t-e.find(".portlet-title").outerHeight(true)-parseInt(e.find(".portlet-body").css("padding-top"))-parseInt(e.find(".portlet-body").css("padding-bottom"))-2;if(e.hasClass("full-height-content-scrollable")){t=t-20;n.find(".full-height-content-body").css("height",t);Metronic.initSlimScroll(n.find(".full-height-content-body"))}else{n.css("min-height",t)}}else{if(Metronic.getViewPort().width<992){Metronic.destroySlimScroll(e.find(".full-height-content-body"));return}if(e.hasClass("full-height-content-scrollable")){t=t-20;e.find(".full-height-content-body").css("height",t);Metronic.initSlimScroll(e.find(".full-height-content-body"))}else{e.css("min-height",t)}}};var h=function(){var r=$(".theme-panel");if($("body").hasClass("page-boxed")==false){$(".layout-option",r).val("fluid")}$(".sidebar-option",r).val("default");$(".page-header-option",r).val("fixed");$(".page-footer-option",r).val("default");if($(".sidebar-pos-option").attr("disabled")===false){$(".sidebar-pos-option",r).val(Metronic.isRTL()?"right":"left")};var i=function(){$("body").removeClass("page-boxed").removeClass("page-footer-fixed").removeClass("page-sidebar-fixed").removeClass("page-header-fixed").removeClass("page-sidebar-reversed");$(".page-header > .page-header-inner").removeClass("container");if($(".page-container").parent(".container").size()===1){$(".page-container").insertAfter("body > .clearfix")}if($(".page-footer > .container").size()===1){$(".page-footer").html($(".page-footer > .container").html())}else if($(".page-footer").parent(".container").size()===1){$(".page-footer").insertAfter(".page-container")}$("body > .container").remove()};var u="";var a=function(){var e=$(".layout-option",r).val();var t=$(".sidebar-option",r).val();var a=$(".page-header-option",r).val();var f=$(".page-footer-option",r).val();var l=$(".sidebar-pos-option",r).val();if(t=="fixed"&&a=="default"){alert("Default Header with Fixed Sidebar option is not supported. Proceed with Fixed Header with Fixed Sidebar.");$(".page-header-option",r).val("fixed");$(".sidebar-option",r).val("fixed");t="fixed";a="fixed"}i();if(e==="boxed"){$("body").addClass("page-boxed");$(".page-header > .page-header-inner").addClass("container");var c=$("body > .clearfix").after('<div class="container"></div>');$(".page-container").appendTo("body > .container");if(f==="fixed"){$(".page-footer").html('<div class="container">'+$(".page-footer").html()+"</div>")}else{$(".page-footer").appendTo("body > .container")}}if(u!=e){Metronic.runResizeHandlers()}u=e;if(a==="fixed"){$("body").addClass("page-header-fixed");$(".page-header").removeClass("navbar-static-top").addClass("navbar-fixed-top")}else{$("body").removeClass("page-header-fixed");$(".page-header").removeClass("navbar-fixed-top").addClass("navbar-static-top")}if($("body").hasClass("page-full-width")===false){if(t==="fixed"){$("body").addClass("page-sidebar-fixed");$("page-sidebar-menu").addClass("page-sidebar-menu-fixed");$("page-sidebar-menu").removeClass("page-sidebar-menu-default");o()}else{$("body").removeClass("page-sidebar-fixed");$("page-sidebar-menu").addClass("page-sidebar-menu-default");$("page-sidebar-menu").removeClass("page-sidebar-menu-fixed");$(".page-sidebar-menu").unbind("mouseenter").unbind("mouseleave")}}if(f==="fixed"){$("body").addClass("page-footer-fixed")}else{$("body").removeClass("page-footer-fixed")}if(Metronic.isRTL()){if(l==="left"){$("body").addClass("page-sidebar-reversed");$("#frontend-link").tooltip("destroy").tooltip({placement:"right"})}else{$("body").removeClass("page-sidebar-reversed");$("#frontend-link").tooltip("destroy").tooltip({placement:"left"})}}else{if(l==="right"){$("body").addClass("page-sidebar-reversed");$("#frontend-link").tooltip("destroy").tooltip({placement:"left"})}else{$("body").removeClass("page-sidebar-reversed");$("#frontend-link").tooltip("destroy").tooltip({placement:"right"})}}n();s()};var f=function(n){var r=Metronic.isRTL()?n+"-rtl":n;$("#style_color").attr("href",t+"themes/"+r+".css");if(n=="light2"){$(".page-logo img").attr("src",e+"logo-invert.png")}else{$(".page-logo img").attr("src",e+"logo.png")}if($.cookie){$.cookie("style_color",n,{path:'/'})}};$(".toggler",r).click(function(){$(".toggler").hide();$(".toggler-close").show();$(".theme-panel > .theme-options").show()});$(".toggler-close",r).click(function(){$(".toggler").show();$(".toggler-close").hide();$(".theme-panel > .theme-options").hide()});$(".theme-colors > ul > li",r).click(function(){var e=$(this).attr("data-style");f(e);$("ul > li",r).removeClass("current");$(this).addClass("current")});$(".layout-option, .page-header-option, .sidebar-option, .page-footer-option, .sidebar-pos-option",r).change(a);if($.cookie&&$.cookie("style_color")){f($.cookie("style_color"))}};return{init:function(){s();r();a();u();c();l();f();h();Metronic.addResizeHandler(n);Metronic.addResizeHandler(s);Metronic.addResizeHandler(c)},fixContentHeight:function(){n()},getLayoutImgPath:function(){return e}}}()